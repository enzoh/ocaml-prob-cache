OASISFormat: 0.4
Name:        prob-cache
Version:     0.1
License:     GPL
LicenseFile: LICENSE.txt
Authors:     Carmelo Piccione
Synopsis:    Probability cache library for OCaml
BuildTools:  ocamlbuild
Plugins: META (0.4), DevFiles (0.4)

Flag riak
  Description: Enable/Disable riak cache backend
  Default: true
Flag containers
  Description: Enable/Disable containers cache backend
  Default: true

Flag examples
  Description: Enable/Disable example support library
  Default: true
Flag containers_examples
  Description: Enable/Disable containers api examples
  Default: true
Flag riak_examples
  Description: Enable/Disable riak api examples
  Default: true


Library prob_cache
  Path:               src/core
  Pack:               false
  Modules:            Prob_cache_phashtbl, Prob_cache_hashset, Prob_cache_update_rules, Prob_cache_options, Prob_cache_update_rule_option,
                        Prob_cache_running, Prob_cache_data, Prob_cache_events, Prob_cache_prior, Prob_cache_entry,
                        Prob_cache_calculus, Prob_cache_create_fun, Prob_cache_observe_data_fun,
                        Prob_cache_data_fun, Prob_cache_fold, Prob_cache_fold_fun, Prob_cache_model_primitives,
                        Prob_cache_model_kernel, Prob_cache_model_decorator, Prob_cache_model, Prob_cache
  InternalModules:    Prob_cache_powerset
  BuildDepends:       lacaml, containers, containers.data, containers.advanced, sequence, ppx_deriving,
                        ppx_deriving.make, ppx_deriving.ord, ppx_deriving.show, ppx_deriving.iter, ppx_deriving_protobuf, or_errors

Library examples
  if flag(examples)
    Build: true
  else
    Build: false
  Path:               src/examples
  FindLibParent:      prob_cache
  Pack:               false
  Modules:            Prob_cache_coin_flip, Prob_cache_sprinkler
  BuildDepends:       prob_cache

Library containers
  if flag(containers)
    Build: true
  else
    Build: false
  Path:               src/containers
  FindLibParent:      prob_cache
  Pack:               false
  Modules:            Containers_model_intf, Containers_set_model, Containers_sequence_model, Prob_cache_containers
  InternalModules:    Containers_model_impl
  BuildDepends:       prob_cache, containers, containers.data, containers.advanced, sequence, ppx_deriving,
                        ppx_deriving.ord, ppx_deriving.show, ppx_deriving.iter, ppx_deriving_protobuf, or_errors_containers

Library riak
  if flag(riak)
    Build: true
  else
    Build: false
  Path:               src/riak
  FindLibParent:      prob_cache
  Pack:               false
  Modules:            Riak_model_intf, Riak_set_model, Riak_sequence_model, Prob_cache_riak
  InternalModules:    Riak_model_impl
  BuildDepends:       prob_cache, threads, ppx_deriving, ppx_deriving.ord, ppx_deriving.show, ppx_deriving.iter,
                        ppx_deriving_protobuf, prob_cache, core, async, bitstring, riakc_ppx, or_errors_async


Executable containers_sprinkler
  if flag(containers_examples)
    Build: true
  else
    Build: false
  Path:               src/containers_examples
  MainIs:             containers_sprinkler.ml
  BuildDepends:       prob_cache.containers, prob_cache.examples

Executable containers_coin_flip
  if flag(containers_examples)
    Build: true
  else
    Build: false
  Path:               src/containers_examples
  MainIs:             containers_coin_flip.ml
  BuildDepends:       prob_cache.containers, prob_cache.examples

Executable riak_sprinkler
  if flag(riak_examples)
    Build: true
  else
    Build: false
  Path:               src/riak_examples
  MainIs:             riak_sprinkler.ml
  BuildDepends:       prob_cache.riak, prob_cache.examples

Executable riak_coin_flip
  if flag(riak_examples)
    Build: true
  else
    Build: false
  Path:               src/riak_examples
  MainIs:             riak_coin_flip.ml
  BuildDepends:       prob_cache.riak, prob_cache.examples


AlphaFeatures : ocamlbuild_more_args

Document "prob_cache"
  Type: ocamlbuild (0.4)
  BuildTools: ocamldoc
  Title: Probability Cache API
  XOCamlbuildPath: src/core
  XOCamlbuildExtraArgs:
    "-docflags '-colorize-code -html -short-functors -charset utf-8'"
  XOCamlbuildLibraries: prob_cache


Document "prob_cache_examples"
  Type: ocamlbuild (0.4)
  BuildTools: ocamldoc
  Title: Probability Cache Examples Support API
  XOCamlbuildPath: src/examples
  XOCamlbuildExtraArgs:
    "-docflags '-colorize-code -html -short-functors -charset utf-8'"
  XOCamlbuildLibraries: prob_cache.examples


Document "prob_cache_containers"
  Type: ocamlbuild (0.4)
  BuildTools: ocamldoc
  Title: Probability Containers Cache API
  XOCamlbuildPath: src/containers
  XOCamlbuildExtraArgs:
    "-docflags '-colorize-code -html -short-functors -charset utf-8'"
  XOCamlbuildLibraries: prob_cache.containers

Document "prob_cache_riak"
  Type: ocamlbuild (0.4)
  BuildTools: ocamldoc
  Title: Probability Riak Cache API
  XOCamlbuildPath: src/riak
  XOCamlbuildExtraArgs:
    "-docflags '-colorize-code -html -short-functors -charset utf-8'"
  XOCamlbuildLibraries: prob_cache.riak
